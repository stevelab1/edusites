{% extends "base.html" %}

{% block title %}
  {{ object.title }}
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <small><ol class="breadcrumb p-1 px-3 m-2 mb-4 rounded-pill border border-1">
    <li class="breadcrumb-item"><a href="/"><svg width="1em" height="1em" viewBox="0 2 17 15.5" class="bi bi-house-door-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M6.5 10.995V14.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5V11c0-.25-.25-.5-.5-.5H7c-.25 0-.5.25-.5.495z"/>
  <path fill-rule="evenodd" d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
</svg></a></li>
    <li class="breadcrumb-item"><a href="{% url "course_list_subject" object.subject.slug %}"> {{ object.subject.title }} Courses</a></li>
<!--    <li class="breadcrumb-item active" aria-current="page">{{ course.title }}</li>-->
  </ol></small>
</nav>

<div class=" mx-3">
     <h1>
        {{ object.title|upper }}
     </h1>
        <div class="row">

    <div class="col-12 mt-4 mb-5">

  {% with subject=object.subject %}
    <div class="card p-5">
      <h2>Overview</h2>

      {{ object.overview|linebreaks }}
       <p class="text-muted">
        {{ object.modules.count }} module{{ object.modules.count|pluralize }}: {% for m in course.modules.all %} {{ m.title }} {% if not forloop.last %}, {% endif %}
  {% endfor %} <br>
        Instructor: {{ object.owner.get_full_name }}<br>
        Subject: {{ subject.title }}
      </p>

        <p class="tags">
          Tags:
          {% for tag in course.tags.all %}
            <a href="{% url "course_list_tag" tag.slug %}">
              {{ tag.name }}
            </a>
            {% if not forloop.last %}, {% endif %}
          {% endfor %}
        </p>
<p></p>
{% if request.user.is_authenticated %}
  <form action="{% url "student_enroll_course" %}" method="post">
    {{ enroll_form }}
    {% csrf_token %}
    <input type="submit" value="Enrol now">
  </form>
{% else %}
        <p></p>

  <p><a href="{% url "student_registration" %}" class="button p-3">
    Register to enrol
  </a></p>
{% endif %}
  {% endwith %}




        <img src="https://res.cloudinary.com/hmklz8dtf/image/upload/v1/{{ course.file }}" class="position-relative top-100 start-100 translate-middle-y" style="border-radius: 20px" onerror="this.style.display='none'">



  </div>
  </div>

            <div class="mx-2">
<p><h3>Other courses you might like:</h3></p>
{% for course in related_items %}
  <p>
      <a href="{% url "course_detail" course.slug %}"><u>{{ course.title }}</u></a>
  </p>
{% empty %}
  There are no similar courses yet.
{% endfor %}

    </div>  </div>

  </div>


<!--               <p class="card-text"><small class="text-muted">Instructor: {{ course.owner.get_full_name }}</small></p>-->
<!--             </div>-->
<!--             <div class="card-footer bg-white border-0">-->
<!--               <span  class="badge rounded-pill bg-secondary">{{ course.modules.all.count }} modules</span>-->
<!--                                <span class="badge rounded-pill bg-secondary"> {{ object.subject.title }} </span>-->

<!--                                <span  class="badge rounded-pill bg-secondary">{% for categories in course.categories.all %} {{ categories|title }} {% if not forloop.last %}, {% endif %}-->
<!--  {% endfor %}</span>-->
<!--                 <span  class="badge rounded-pill bg-secondary">{% for m in course.modules.all %} {{ m.title }} {% if not forloop.last %}, {% endif %}-->
<!--  {% endfor %}</span>-->

<!--     <p><h4><a href="/course/{{ course.slug }}">{{ course.title }}</h4>-->
<!--{{ course.overview|truncatewords_html:5 }}</a></p>-->


{% endblock %}
