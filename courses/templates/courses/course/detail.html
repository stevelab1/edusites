{% extends "base.html" %}

{% block title %}
  {{ object.title }}
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
  <small><ol class="breadcrumb p-1 px-3 m-2 mb-4 rounded-pill border border-1">
    <li class="breadcrumb-item"><a href="/"><svg width="1em" height="1em" viewBox="0 2 17 15.5" class="bi bi-house-door-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M6.5 10.995V14.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5V11c0-.25-.25-.5-.5-.5H7c-.25 0-.5.25-.5.495z"/>
  <path fill-rule="evenodd" d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
</svg></a></li>
    <li class="breadcrumb-item"><a href="{% url "course_list_subject" object.subject.slug %}"> {{ object.subject.title }} Courses</a></li>
<!--    <li class="breadcrumb-item active" aria-current="page">{{ course.title }}</li>-->
  </ol></small>
</nav>

<div class=" mx-3" >
    <div class="row">
<!--col col-sm-6 col-md-6 col-lg-4 col-xl-3    -->
        <div class="col-12 col-md-6 col-lg-4 col-xl-4 mt-1 mb-3">
<!--        <div class="col-12 mt-1 mb-3">-->
            {% with subject=object.subject %}
            <div class="card p-3">
                <img src="https://res.cloudinary.com/hmklz8dtf/image/upload/v1/{{ course.file }}" class="card-img-top rounded-bottom" style="border-radius: 20px" onerror="this.style.display='none'">
                <div class="card-body">
                    <h2 class="card-title mb-2"><strong>{{ object.title }}</strong></h2>
<!--                       {% for category in course.categories.all %} <a href="{% url "course_list_category" category.slug %}"><span class="badge rounded-pill bg-secondary mb-4">{{ category }}</span></a>-->
<!--  {% endfor %}-->
                    {% for category in course.categories.all %} <a href="{% url "course_list_category" category.slug %}"><button type="button" class="btn btn-outline-dark btn-sm rounded-pill mb-3 py-0"><small>{{ category }}</small></button></a>
                    {% endfor %}
                    <p class="card-text mb-4">{{ object.overview|slice:":105" }}</p>


<!--        <h5><img src="https://res.cloudinary.com/hmklz8dtf/image/upload/v1/{{ course.file }}" class="img-thumbnail float-end p-0 w-50 h-50 border-0 ms-2 mb-3" style="border-radius: 20px" onerror="this.style.display='none'">-->
                    <h5 class="card-title">Skills you'll gain</h5>
                    {% for tag in course.tags.all %}
                    <a href="{% url "course_list_tag" tag.slug %}">
                    <span class="badge rounded-pill bg-secondary">{{ tag.name }}</span>
                    </a>
                    {% endfor %}
            <br><br><br>


<!--                    <h5 class="card-title">About this course</h5>-->


<!--            {{ object.modules.count }} module{{ object.modules.count|pluralize }}: {% for m in course.modules.all %} {{ m.id }}. {{ m.title }}-->
<!--  {% endfor %} <br>-->
<!--        Instructor: {{ object.owner.get_full_name }}<br>-->
<!--        Subject: <a href="{% url "course_list_subject" subject.slug %}">-->
<!--        {{ subject.title }}</a>-->
<!--            <br><br>-->






<!--                <img src="https://res.cloudinary.com/hmklz8dtf/image/upload/v1/{{ course.file }}" class="" style="" onerror="this.style.display='none'">-->





{% if request.user.is_authenticated %}
  <form action="{% url "student_enroll_course" %}" method="post">
    {{ enroll_form }}
    {% csrf_token %}
    <input type="submit" value="Enrol now">
  </form>
{% else %}

  <p><a href="{% url "student_registration" %}" class="button p-3">
    Enrol now
  </a></p>
{% endif %}
  {% endwith %}

  </div>  </div>


<!--            <div class="col-12 col-md-6 col-lg-4 col-xl-4 mt-1 mb-3">-->

<!--                <div class="card p-4">-->

<!--                    {% for m in course.modules.all %} {{ m.id }}. {{ m.title }}-->
<!--  {% endfor %}-->

<!--                </div>-->

<!--  </div>-->
<!--            </div>-->

            <div class="mx-2">
<p><h3>Other courses you might like:</h3></p>
{% for course in related_items %}
  <p>
      <a href="{% url "course_detail" course.slug %}"><u>{{ course.title }}</u></a>
  </p>
{% empty %}
  There are no similar courses yet.
{% endfor %}

    </div>  </div>

  </div>


<!--               <p class="card-text"><small class="text-muted">Instructor: {{ course.owner.get_full_name }}</small></p>-->
<!--             </div>-->
<!--             <div class="card-footer bg-white border-0">-->
<!--               <span  class="badge rounded-pill bg-secondary">{{ course.modules.all.count }} modules</span>-->

<!--    {% for category in course.categories.all %} <a href="{% url "course_list_category" category.slug %}"><span class="badge rounded-pill bg-secondary">{{ category.slug }}</span></a>-->
<!--  {% endfor %}-->

<!--                                <span class="badge rounded-pill bg-secondary"> {{ object.subject.title }} </span>-->


<!--                 <span  class="badge rounded-pill bg-secondary">{% for m in course.modules.all %} {{ m.title }} {% if not forloop.last %}, {% endif %}-->
<!--  {% endfor %}</span>-->

<!--     <p><h4><a href="/course/{{ course.slug }}">{{ course.title }}</h4>-->
<!--{{ course.overview|truncatewords_html:5 }}</a></p>-->


{% endblock %}
